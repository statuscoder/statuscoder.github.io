<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Controls</title>
    <!-- Bootstrap core CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <style>

      @import url(https://fonts.googleapis.com/css?family=Montserrat:400);

      .data-container {
          margin-top: 0px;
          background-color: #ffffff;
      }

      .data-container .row .col {
        margin-top: 5px;
        margin-bottom: 0px;
      }

      .row-blue {
        background-color: dodgerblue;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }

      .row-purple {
        background-color:mediumpurple;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }

      .row-white {
        background-color:yellow;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
      .row-green {
        background-color:greenyellow;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }

      .row-grey {
        background-color: #cccccc;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }

      .api-path {
        width: 400px!important;
      }

      .motion-params {
        width: 265px!important;
      }

      .color-text {
        width: 55px!important;
      }

      .ufo-container {
        margin-top: 0px;
        background-color: #ffffff;
        margin-right: auto;
        margin-left: auto;
        width: 100%;
      }
      #col-bottom, #col-top {
        height: 400px;
        width: 50%;
      }

      .col-result span {
        text-align: left;
      }

      .chart-text {
        font: 16px/1.4em "Montserrat", Arial, sans-serif;
        fill: #000;
        -moz-transform: translateY(0.25em);
        -ms-transform: translateY(0.25em);
        -webkit-transform: translateY(0.25em);
        transform: translateY(0.25em);
      }

      .chart-number {
        font-size: 0.6em;
        line-height: 1;
        text-anchor: middle;
        -moz-transform: translateY(-0.25em);
        -ms-transform: translateY(-0.25em);
        -webkit-transform: translateY(-0.25em);
        transform: translateY(-0.25em);
      }

      .chart-label {
        font-size: 0.2em;
        text-transform: uppercase;
        text-anchor: middle;
        -moz-transform: translateY(0.7em);
        -ms-transform: translateY(0.7em);
        -webkit-transform: translateY(0.7em);
        transform: translateY(0.7em);
      }

    </style>
  </head>
  <body>
      
    <div class="container data-container">
        <div class="row row-white">
            <div class="col">    
                <div class="d-flex flex-column flex-md-row align-items-center p-2 px-md-4 mb-3 bg-white border-bottom shadow-sm">
                    <h5 class="my-0 mr-md-auto font-weight-normal">Instructions</h5>
                    <span>Pick a single item from option 'a' or multiple items from option 'b', then add your api url and click 'Send to UFO'</span>
                </div>
            </div>
        </div>
        <div class="row row-blue">
            <div class="col">    
                <div class="d-flex flex-column flex-md-row align-items-center p-2 px-md-4 mb-3 bg-white border-bottom shadow-sm">
                    <h5 class="my-0 mr-md-auto font-weight-normal">a) Pre-set Params</h5>
                    <form class="form-inline mt-2 mt-md-0">
                        <label for="api-url">Params: </label>
                        &nbsp;&nbsp;
                        <select id="preSetParams"><option value="">NONE</option></select>
                    </form>
                </div>
            </div>
        </div>
        <div class="row row-purple">
            <div class="col">          
                <div class="d-flex flex-column flex-md-row align-items-center p-2 px-md-4 mb-3 bg-white border-bottom shadow-sm">
                    <h5 class="my-0 mr-md-auto font-weight-normal">b) Reset Options</h5>
                    <form class="form-inline mt-2 mt-md-0">
                    <label for="reset-top">Reset Top Row: </label>
                    &nbsp;&nbsp;
                    <input type="checkbox" class="form-control input-checkbox" id="reset-top">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <label for="reset-bottom">Reset Bottom Row: </label>
                    &nbsp;&nbsp;
                    <input type="checkbox" class="form-control input-checkbox" id="reset-bottom">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <label for="reset-bottom">Reset Logo: </label>
                    &nbsp;&nbsp;
                    <input type="checkbox" class="form-control input-checkbox" id="reset-logo">
                    &nbsp;&nbsp;
                </form>
                </div>   
                <div class="d-flex flex-column flex-md-row align-items-center p-2 px-md-4 mb-3 bg-white border-bottom shadow-sm">
                    <h5 class="my-0 mr-md-auto font-weight-normal">b) Ring Colors</h5>
                    <form class="form-inline mt-2 mt-md-0">
                    <label for="top-fg"><img src="arrow-up.png" width="25%" height="25%"/> FG: </label>
                    <input type="color" id="top-fg" name="top-fg" value="#00ff00">
                    &nbsp;&nbsp;
                    <input type="text" class="form-control input-text color-text" id="top-fg-text" placeholder="0|15">                    
                    &nbsp;&nbsp;
                    <label for="top-bg"><img src="arrow-up.png" width="25%" height="25%"/> BG: </label>
                    <input type="color" id="top-bg" name="top-bg" value="#00ff00">
                    &nbsp;&nbsp;
                    <input type="text" class="form-control input-text color-text" id="top-bg-text" placeholder="0|15">                    
                    &nbsp;&nbsp;
                    <label for="btm-fg"><img src="arrow-down.png" width="25%" height="25%"/> FG: </label>
                    <input type="color" id="btm-fg" name="btm-fg" value="#00ff00">
                    &nbsp;&nbsp;
                    <input type="text" class="form-control input-text color-text" id="btm-fg-text" placeholder="0|15">                    
                    &nbsp;&nbsp;
                    <label for="btm-bg"><img src="arrow-down.png" width="25%" height="25%"/> BG: </label>
                    <input type="color" id="btm-bg" name="btm-bg" value="#00ff00">
                    &nbsp;&nbsp;
                    <input type="text" class="form-control input-text color-text" id="btm-bg-text" placeholder="0|15">                    
                    </form>
                </div>   
                <div class="d-flex flex-column flex-md-row align-items-center p-2 px-md-4 mb-3 bg-white border-bottom shadow-sm">
                    <h5 class="my-0 mr-md-auto font-weight-normal">b) Motion Options</h5>
                    <form class="form-inline mt-2 mt-md-0">
                    <label for="morph-motion">Morph Params: </label>
                        &nbsp;&nbsp;
                    <input type="checkbox" class="form-control input-checkbox" id="morph-check">
                        &nbsp;&nbsp;
                    <input type="text" class="form-control input-text motion-params" id="morph-motion" placeholder="Example: top_morph=80|8">
                        &nbsp;&nbsp;
                    <label for="whirl-motion">Whirl Params: </label>
                        &nbsp;&nbsp;
                        <input type="checkbox" class="form-control input-checkbox" id="whirl-check">
                        &nbsp;&nbsp;
                    <input type="text" class="form-control input-text motion-params" id="whirl-motion" placeholder="Example: top_whirl=240">
                    </form>
                </div>
            </div>
        </div>
        <div class="row row-green">
            <div class="col">
                <div class="d-flex flex-column flex-md-row align-items-center p-2 px-md-4 mb-3 bg-white border-bottom shadow-sm">
                <h5 class="my-0 mr-md-auto font-weight-normal">Connect to UFO</h5>
                    <form class="form-inline mt-2 mt-md-0">
                    <label for="api-url">API URL: </label>
                    &nbsp;&nbsp;
                    <input type="text" class="form-control input-text api-path" id="api-url" placeholder="https://<ufourl>/api" onBlur="setUrlCookie()">
                        &nbsp;&nbsp;
                    <label for="reset-top">Connection Status: </label>
                        &nbsp;&nbsp;
                    <input type="color" id="api-status" name="api-status" value="#cccccc" disabled>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button class="btn btn-success" id="sendToUFO" data-id="-1">Send to UFO</button>
                    </form>
                </div>   
            </div>
        </div>
    </div>
    <div class="container ufo-container">
        <div class="row row-grey">
          <div class="col" id="col-bottom">
          </div>
          <div class="col" id="col-top">
          </div>
        </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col" id="col-result">
          <span id="result"></span>
        </div>
      </div>  
    </div>

  <!-- Page Content -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <script>

    //global vars
    //page elements
    var obj_top_fg = $('#top-fg');
    var obj_btm_fg = $('#btm-fg');
    var obj_presets = $('#preSetParams');

    //preset values
    var presets = {
      "NONE" : 
        { url: ""},
      "Turn Off UFO": 
        { 
            url: "top_init&bottom_init&logo=000000|000000|000000|000000",
            reset_top: true,
            reset_btm: true,
            reset_logo: true,
            top_fg: "000000",
            top_bg: "000000",
            btm_fg: "000000",
            btm_bg: "000000",
            logo_top: "000000",
            logo_left: "000000",
            logo_btm: "000000",
            logo_right: "800000",
            top_morph: "",
            btm_morph: "",
            top_whirl: "",
            btm_whirl: ""
        },
      "Two color with ccw whirl": 
        { 
            url: "logo_reset&top_init&bottom_init&top_bg=ffffff&top=0|12|00ff00&top_whirl=240&bottom_bg=ffffff&bottom=0|12|00ff00&bottom_whirl=240|ccw",
            reset_top: true,
            reset_btm: true,
            reset_logo: true,
            top_fg: "0|12|00ff00",
            top_bg: "ffffff",
            btm_fg: "0|12|00ff00",
            btm_bg: "ffffff",
            logo_top: "ffff00",
            logo_left: "0080ff",
            logo_btm: "6600cc",
            logo_right: "80ff00",
            top_morph: "",
            btm_morph: "",
            top_whirl: "240",
            btm_whirl: "240|ccw"
        },
      "All red": 
        { 
            url: "logo_reset&top_init&bottom_init&top=ff0000&bottom=ff0000&top_bg=ff0000&bottom_bg=ff0000",
            reset_top: true,
            reset_btm: true,
            reset_logo: true,
            top_fg: "ff0000",
            top_bg: "ff0000",
            btm_fg: "ff0000",
            btm_bg: "ff0000",
            logo_top: "ffff00",
            logo_left: "0080ff",
            logo_btm: "6600cc",
            logo_right: "80ff00",
            top_morph: "",
            btm_morph: "",
            top_whirl: "",
            btm_whirl: ""
        },
      "All white": 
        { 
            url: "logo_reset&top_init&bottom_init&top=ffffff&bottom=ffffff&top_bg=ffffff&bottom_bg=ffffff",
            reset_top: true,
            reset_btm: true,
            reset_logo: true,
            top_fg: "ffffff",
            top_bg: "ffffff",
            btm_fg: "ffffff",
            btm_bg: "ffffff",
            logo_top: "ffff00",
            logo_left: "0080ff",
            logo_btm: "6600cc",
            logo_right: "80ff00",
            top_morph: "",
            btm_morph: "",
            top_whirl: "",
            btm_whirl: ""
        },
      "Top Red, Bottom Green":
        { 
            url: "top=ff0000&bottom=00ff00&top_bg=ff0000&bottom_bg=00ff00",
            reset_top: false,
            reset_btm: false,
            reset_logo: false,
            top_fg: "ff0000",
            top_bg: "ff0000",
            btm_fg: "00ff00",
            btm_bg: "00ff00",
            logo_top: "ffff00",
            logo_left: "0080ff",
            logo_btm: "6600cc",
            logo_right: "80ff00",
            top_morph: "",
            btm_morph: "",
            top_whirl: "",
            btm_whirl: ""
        },
    };

    /********
    **
    **  SET YOUR CUSTOM PRE SETS HERE
    **
    ********/
    
    var bclrs = ["c9c9c9","ffffff","ff0000","ffffff","ff0000"];
    var tclrs = ["c9c9c9","ffffff","ff0000","ffffff","00ff00"];

    //var baseUrl = "https://ufo217.ddns.net/"; //"https://ufo/";

    var r = document.getElementById("result");

    $(document).ready(function() {
        $("#api-url").val(getCookie('api-url'));
        $("#sendToUFO").on('click', function(e){
          buildAPICall(e,$(this));
        });
        $("#preSetParams").on('change', function(e){
            console.log('changed');
            updateSettings(e,$(this));
        });

        //always
        populateSelect();
        setupUFO();
    });

    function setUrlCookie(){
      setCookie('api-url',$('#api-url').val(),90);
    }

    function populateSelect() {
      console.log('setPreSets');

      pre_set = document.getElementById('preSetParams');
      for (key in presets){
        for (subkey in presets[key])
        {
            if (subkey == "url") {
                var opt = document.createElement("option");
                opt.value = subkey;
                opt.text = key;
                pre_set.add(opt,null);            
            }
        }
      }
    }

    function setCookie(cname, cvalue, exdays) {
      console.log('setCookie');
      var d = new Date();
      d.setTime(d.getTime() + (exdays*24*60*60*1000));
      var expires = "expires="+ d.toUTCString();
      var cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      console.log(cookie);
      document.cookie = cookie;
    }

    function getCookie(cname) {
      console.log('getCookie');

      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      console.log(decodedCookie);
      var ca = decodedCookie.split(';');
      for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        console.log(c);
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
          console.log(c);
        }
        if (c.indexOf(name) == 0) {
          console.log(c.substring(name.length, c.length));
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function setupUFO()
    {
      console.log('setupUFO');
      makeUFO('bottom', '#000000', '#cccccc',$('#btm-fg').val(), 6.4, 6.659, "top",50);
      makeLogo('bottom',20,20,30,30, ["#ffff00", "#0080ff", "#6600cc", "#80ff00"]);
      makeUFO('top', '#000000', '#cccccc', $('#top-fg').val(), 6.4, 6.659, "top",50);
    }

    function updateSettings(e, element){
      e.preventDefault();
      console.log('updateSettings');
      var obj = document.getElementById('preSetParams')
      var id = obj.options[obj.selectedIndex].text;
      console.log(id);
      if (id != 'NONE') {
        //options
        $('#reset-top').prop("checked",presets[id].reset_top);
        $('#reset-bottom').prop("checked",presets[id].reset_btm);
        $('#reset-logo').prop("checked",presets[id].reset_logo);

        var tfa = presets[id].top_fg.split('|');
        var tba = presets[id].top_bg.split('|');
        var bfa = presets[id].btm_fg.split('|');
        var bba = presets[id].btm_bg.split('|');
        var tfc = "";
        var tbc = "";
        var bfc = "";
        var bbc = "";

        if (Array.isArray(tfa) && tfa.length > 2) {
            $('#top-fg-text').val(tfa[0] + "|" + tfa[1]);
            tfc =  tfa[2];
        } else {
            $('#top-fg-text').val("");
            tfc = tfa;
        }

        if (Array.isArray(tba) && tba.length > 2) {
            $('#top-bg-text').val(tba[0] + "|" + tba[1]);
            tbc =  tba[2];
        } else {
            $('#top-bg-text').val("");
            tbc = tba;
        }

        if (Array.isArray(bfa) && bfa.length > 2) {
            $('#btm-fg-text').val(bfa[0] + "|" + bfa[1]);
            bfc =  bfa[2];
        } else {
            $('#btm-fg-text').val("");
            bfc = bfa;
        }

        if (Array.isArray(bba) && bba.length > 2) {
            $('#btm-bg-text').val(bba[0] + "|" + bba[1]);
            bbc =  bba[2];
        } else {
            $('#btm-bg-text').val("");
            bbc = bba;
        }
 
        //colors
        $('#top-fg').val("#"+tfc);
        $('#top-bg').val("#"+tbc);
        $('#btm-fg').val("#"+bfc);
        $('#btm-bg').val("#"+bbc);
        
        //whirl
        if (presets[id].top_whirl.length > 0 && presets[id].btm_whirl.length > 0 ) {
            $('#whirl-motion').val("top_whirl=" + presets[id].top_whirl + "&" + "bottom_whirl=" + presets[id].btm_whirl);
            $('#whirl-check').prop("checked",(presets[id].top_whirl.length > 0 || presets[id].btm_whirl.length > 0) ? true : false);
        } else if (presets[id].top_whirl.length > 0 ) {
            $('#whirl-motion').val("top_whirl=" + presets[id].top_whirl);
            $('#whirl-check').prop("checked",(presets[id].top_whirl.length > 0) ? true : false);
        } else if (presets[id].btm_whirl.length > 0 ) {
            $('#whirl-motion').val("bottom_whirl=" + presets[id].btm_whirl);
            $('#whirl-check').prop("checked",(presets[id].btm_whirl.length > 0) ? true : false);
        } else {
            $('#whirl-motion').val("")
            $('#whirl-check').prop("checked",false);
        }
        
        //morph
        if (presets[id].top_morph.length > 0 && presets[id].btm_morph.length > 0 ) {
            $('#morph-motion').val("top_morph=" + presets[id].top_morph + "&" + "bottom_morph=" + presets[id].btm_morph);
            $('#morph-check').prop("checked",(presets[id].top_morph.length > 0 || presets[id].btm_morph.length > 0) ? true : false);
        } else if (presets[id].top_morph.length > 0 ) {
            $('#morph-motion').val("top_morph=" + presets[id].top_morph);
            $('#morph-check').prop("checked",(presets[id].top_morph.length > 0) ? true : false);
        } else if (presets[id].btm_morph.length > 0 ) {
            $('#morph-motion').val("bottom_morph=" + presets[id].btm_morph);
            $('#morph-check').prop("checked",(presets[id].btm_morph.length > 0) ? true : false);
        } else {
            $('#morph-motion').val("")
            $('#morph-check').prop("checked",false);
        }

      }      
    }

    function changeColors(id, tc, bc){
      console.log('changeColors');
      if (id != -1){    
        var params = presets[id.url];
        console.log("Change to " + params);

        //top_fg.value = "#"+ tclrs[id];
        //btm_fg.value = "#"+ tclrs[id];
      }
    }

    function postAPI(url, params){
      console.log('postAPI');

      url = url + params;
      console.log(url);
      r.innerHTML = url + '</br>' + r.innerHTML;

      console.log('Ajax');
      $.ajax({
          url:  url,
          type: "GET"
      })
      .done(function() {
          console.log('Done');
          $('#api-status').val('#00ff00');
      })
      .fail(function (xhr, status, error) {
            $('#api-status').val('#ff0000');
              console.log('xhr:' + xhr + "!");
              console.log('status:' + status + "!");
              console.log('error:' + error + "!");
      });   
    }

    function buildAPICall(e, element){
      e.preventDefault();
      console.log('buildAPICall');
      //set internal vars
      var obj = document.getElementById('preSetParams');
      var id = obj.options[obj.selectedIndex].text;
      var url = $('#api-url').val() + "?";
      console.log(url);
      var params = "";
//      if (id != 'NONE') {
//        console.log('changing UI values');
//        params = presets[id].url;
//      } else {
        params += document.querySelector("#reset-top").checked == true ? 'top_init&' : '';
        params += document.querySelector("#reset-bottom").checked == true ? 'bottom_init&' : '';
        params += document.querySelector("#reset-logo").checked == true ? 'logo_reset&' : '';
        params += $("#top-bg").val().length > 0 ? 'top_bg=' +  ($('#top-bg-text').val().length > 0 ? $('#top-bg-text').val() + "|" : "") + $('#top-bg').val().substr(1,6) + '&' : ''; 
        params += $("#top-fg").val().length > 0 ? 'top=' + ($('#top-fg-text').val().length > 0 ? $('#top-fg-text').val() + "|" : "") + $('#top-fg').val().substr(1,6) + '&' : ''; 
        params += $("#btm-bg").val().length > 0 ? 'bottom_bg=' + ($('#btm-bg-text').val().length > 0 ? $('#btm-bg-text').val() + "|" : "") + $('#btm-bg').val().substr(1,6) + '&' : ''; 
        params += $("#btm-fg").val().length > 0 ? 'bottom=' + ($('#btm-fg-text').val().length > 0 ? $('#btm-fg-text').val() + "|" : "") + $('#btm-fg').val().substr(1,6) + '&' : ''; 
        params += (document.querySelector("#morph-check").checked == true && $("#morph-motion").val().length > 0) ? $('#morph-motion').val() + '&' : ''; 
        params += (document.querySelector("#whirl-check").checked == true && $("#whirl-motion").val().length > 0) ? $('#whirl-motion').val() + '&' : ''; 
        params = params.substr(0,params.length-1);
//      }      

      console.log("changing ufo");
      
      changeColors(id);
      postAPI(url, params);
      setupUFO();

    }

    function removeAllChildNodes(parent) {
       while (parent.firstChild) {
            parent.removeChild(parent.firstChild);
        }
    }    

    function makeUFO(id, insidecolor, gapcolor, ledcolor, dashlength, rotationoffset, label, size){
        console.log('makeUFO');
        var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute('class','donut');
        svg.setAttribute('id',"ufo-"+id);
        svg.setAttribute('viewBox',"0 0 " + size + " " + size);
        svg.setAttribute('width',"100%");
        svg.setAttribute('height',"100%");
        var div = document.getElementById("col-"+id);
        removeAllChildNodes(div);        
        var l = 15;
        var ro = 25;
        var cx = size/2;
        var cy = size/2;
        var r = 15.91549430918954;
        //var r = 16;
        var f = "transparent";
        var sw = 2.3;
        var d = dashlength + " " + (100-dashlength);

        var circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute('class','donut-ring');
            circle.setAttribute('cx',cx);
            circle.setAttribute('cy',cy);
            circle.setAttribute('r',17);
            circle.setAttribute('fill',gapcolor);
        svg.appendChild(circle);            

        circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute('class','donut-hole');
            circle.setAttribute('cx',cx);
            circle.setAttribute('cy',cy);
            circle.setAttribute('r',15);
            circle.setAttribute('fill',insidecolor);
        svg.appendChild(circle);


        circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        for(var i = 0; i < l; i++)
        {
            circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute('class','donut-segment');
            circle.setAttribute('cx',cx);
            circle.setAttribute('cy',cy);
            circle.setAttribute('r',r);
            circle.setAttribute('fill',f);
            circle.setAttribute('stroke',ledcolor);
            circle.setAttribute('stroke-width',sw);
            circle.setAttribute('stroke-dasharray',d);
            circle.setAttribute('stroke-dashoffset',ro);
            svg.appendChild(circle);                
            ro = ro - rotationoffset;
        }
        var g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('class','chart-text');
        var t = document.createElementNS("http://www.w3.org/2000/svg", "text");
            t.setAttribute('class','chart-number');
            t.setAttribute('x','50%');
            t.setAttribute('y','50%');
            t.innerHTML = l;
            g.appendChild(t);
            t = document.createElementNS("http://www.w3.org/2000/svg", "text");
            t.setAttribute('class','chart-label');
            t.setAttribute('x','50%');
            t.setAttribute('y','50%');
            t.innerHTML = label;
            g.appendChild(t);
        //svg.appendChild(g);
        div.appendChild(svg);

    }
        
    function makeLogo(id, t,l,b,r,colors){
      console.log('makeLogo');
        var svg = document.getElementById("ufo-"+id);
        var p = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
        var pts = "{{xy1}} {{xy2}} {{xy3}} {{xy4}} ";
        var sl = ((b-t)/4);
        var ll = (b-t);
        var xy1, xy2, xy3, xy4, t_pts;

        //top
        xy1 = (l+sl) + "," + t; 
        xy2 = l + "," + (t+sl); 
        xy3 = (r-sl) + "," + (t+sl); 
        xy4 = r + "," + t; 
        t_pts = pts;
        t_pts = t_pts.replace(/{{xy1}}/g,xy1).replace(/{{xy2}}/g,xy2).replace(/{{xy3}}/g,xy3).replace(/{{xy4}}/g,xy4);
        p.setAttribute('points', t_pts);
        p.setAttribute('fill',colors[0]);
        svg.appendChild(p);


        //left
        p = document.createElementNS("http://www.w3.org/2000/svg", "polygon");   
        xy1 = l+","+(t+sl); 
        xy2 = (l+sl)+","+(t+sl); 
        xy3 = (l+sl)+","+(b-sl); 
        xy4 = l+","+b; 
        t_pts = pts;
        t_pts = t_pts.replace(/{{xy1}}/g,xy1).replace(/{{xy2}}/g,xy2).replace(/{{xy3}}/g,xy3).replace(/{{xy4}}/g,xy4);            
        p.setAttribute('points', t_pts);
        p.setAttribute('fill',colors[1]);
        svg.appendChild(p);


        //bottom
        p = document.createElementNS("http://www.w3.org/2000/svg", "polygon");   
        xy1 = l+","+b; 
        xy2 = (l+sl)+","+(b-sl); 
        xy3 = (r-sl)+","+(b-sl); 
        xy4 = (r-sl)+","+b; 
        t_pts = pts;
        t_pts = t_pts.replace(/{{xy1}}/g,xy1).replace(/{{xy2}}/g,xy2).replace(/{{xy3}}/g,xy3).replace(/{{xy4}}/g,xy4);            
        p.setAttribute('points', t_pts);
        p.setAttribute('fill',colors[2]);
        svg.appendChild(p);

        //right
        p = document.createElementNS("http://www.w3.org/2000/svg", "polygon");   
        xy1 = (r-sl)+","+b; 
        xy2 = (r-sl)+","+(t+sl); 
        xy3 = r+","+t; 
        xy4 = r+","+(b-sl); 
        t_pts = pts;
        t_pts = t_pts.replace(/{{xy1}}/g,xy1).replace(/{{xy2}}/g,xy2).replace(/{{xy3}}/g,xy3).replace(/{{xy4}}/g,xy4);            
        p.setAttribute('points', t_pts);
        p.setAttribute('fill',colors[3]);
        svg.appendChild(p);

    }    

</script>
</body>
</html>